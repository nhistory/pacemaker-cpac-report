<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="Pacemaker ì£¼ê°„ íšŒì˜ ìë£Œ ì•„ì¹´ì´ë¸Œ - ë¹„ì˜ë¦¬ ë²•ì¸ ì„¤ë¦½ ë° ìš´ì˜ ì „ëµ ì •ë¦¬"
    />
    <title>ì£¼ê°„ íšŒì˜ ìë£Œ | Pacemaker Archive</title>

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="./favicon.png" />
    <link rel="apple-touch-icon" href="./favicon.png" />

    <!-- Open Graph / Social Media Preview -->
    <meta property="og:type" content="website" />
    <meta property="og:title" content="ì£¼ê°„ íšŒì˜ ìë£Œ ì•„ì¹´ì´ë¸Œ | Pacemaker" />
    <meta
      property="og:description"
      content="Pacemaker ë¹„ì˜ë¦¬ í”„ë¡œì íŠ¸ - ë§¤ì£¼ íšŒì˜ ì •ë¦¬ ë° ì „ëµ ìë£Œ ëª¨ìŒ"
    />
    <meta property="og:image" content="./og-image.png" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="ì£¼ê°„ íšŒì˜ ìë£Œ ì•„ì¹´ì´ë¸Œ | Pacemaker" />
    <meta
      name="twitter:description"
      content="Pacemaker ë¹„ì˜ë¦¬ í”„ë¡œì íŠ¸ - ë§¤ì£¼ íšŒì˜ ì •ë¦¬ ë° ì „ëµ ìë£Œ ëª¨ìŒ"
    />
    <meta name="twitter:image" content="./og-image.png" />

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Serif+KR:wght@400;600;700&family=Noto+Sans+KR:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />

    <!-- Fuse.js for Searching -->
    <script src="https://cdn.jsdelivr.net/npm/fuse.js@7.0.0"></script>

    <style>
      :root {
        --color-primary: #00263b;
        --color-secondary: #00adbd;
        --color-accent: #00adbd;
        --color-orange: #ff4f02;
        --color-white: #ffffff;
        --color-gray-50: #f8f9fa;
        --color-gray-100: #f1f3f5;
        --color-gray-200: #d5d7d7;
        --color-gray-600: #6c757d;
        --color-gray-800: #343a40;
        --color-gray-900: #212529;
        --font-serif: "Noto Serif KR", Georgia, serif;
        --font-sans: "Noto Sans KR", -apple-system, sans-serif;
        --space-sm: 0.5rem;
        --space-md: 1rem;
        --space-lg: 1.5rem;
        --space-xl: 2rem;
        --space-2xl: 3rem;
        --space-3xl: 4rem;
        --radius-md: 8px;
        --radius-lg: 12px;
        --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.07);
        --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.1);
      }

      *,
      *::before,
      *::after {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      html {
        font-size: 16px;
        scroll-behavior: smooth;
      }

      body {
        font-family: var(--font-sans);
        line-height: 1.7;
        color: var(--color-gray-800);
        background-color: var(--color-gray-50);
        min-height: 100vh;
        display: flex;
        flex-direction: column;
      }

      /* Header */
      .header {
        background: linear-gradient(
          135deg,
          var(--color-primary) 0%,
          var(--color-secondary) 100%
        );
        color: var(--color-white);
        padding: var(--space-3xl) var(--space-xl);
        text-align: center;
      }

      .header-title {
        font-family: var(--font-serif);
        font-size: clamp(2rem, 5vw, 3rem);
        font-weight: 700;
        margin-bottom: var(--space-md);
      }

      .header-subtitle {
        font-size: 1.125rem;
        color: rgba(255, 255, 255, 0.85);
        max-width: 600px;
        margin: 0 auto var(--space-xl);
      }

      /* Search Bar */
      .search-container {
        max-width: 600px;
        margin: 0 auto;
        position: relative;
        z-index: 10;
      }

      .search-wrapper {
        position: relative;
        display: flex;
        align-items: center;
        background: rgba(255, 255, 255, 0.15);
        backdrop-filter: blur(8px);
        border: 1px solid rgba(255, 255, 255, 0.2);
        border-radius: 50px;
        padding: 0 1.5rem;
        transition: all 0.3s ease;
      }

      .search-wrapper:focus-within {
        background: var(--color-white);
        box-shadow: 0 0 0 4px rgba(0, 173, 189, 0.3);
        border-color: var(--color-accent);
      }

      .search-icon {
        color: rgba(255, 255, 255, 0.7);
        margin-right: 0.75rem;
        flex-shrink: 0;
      }

      .search-wrapper:focus-within .search-icon {
        color: var(--color-accent);
      }

      .search-input {
        width: 100%;
        background: none;
        border: none;
        padding: 1rem 0;
        color: var(--color-white);
        font-family: var(--font-sans);
        font-size: 1rem;
        outline: none;
      }

      .search-input::placeholder {
        color: rgba(255, 255, 255, 0.6);
      }

      .search-wrapper:focus-within .search-input {
        color: var(--color-gray-900);
      }

      .search-wrapper:focus-within .search-input::placeholder {
        color: var(--color-gray-600);
      }

      .search-stats {
        margin-top: var(--space-sm);
        font-size: 0.8125rem;
        color: rgba(255, 255, 255, 0.7);
        height: 1.25rem; /* Reserve space */
      }

      /* Main Content */
      main {
        flex: 1;
        padding: var(--space-3xl) var(--space-xl);
        max-width: 1000px;
        margin: 0 auto;
        width: 100%;
      }

      .section-title {
        font-family: var(--font-serif);
        font-size: 1.5rem;
        color: var(--color-primary);
        margin-bottom: var(--space-xl);
        padding-bottom: var(--space-md);
        border-bottom: 2px solid var(--color-gray-200);
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .no-results {
        grid-column: 1 / -1;
        text-align: center;
        padding: var(--space-3xl);
        background: var(--color-white);
        border-radius: var(--radius-lg);
        color: var(--color-gray-600);
        display: none;
      }

      /* Report Cards */
      .report-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: var(--space-xl);
      }

      .report-card {
        background: var(--color-white);
        border-radius: var(--radius-lg);
        box-shadow: var(--shadow-md);
        overflow: hidden;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        text-decoration: none;
        color: inherit;
        display: block;
      }

      .report-card:hover {
        transform: translateY(-4px);
        box-shadow: var(--shadow-lg);
      }

      .card-header {
        background: linear-gradient(
          135deg,
          var(--color-primary) 0%,
          var(--color-secondary) 100%
        );
        color: var(--color-white);
        padding: var(--space-lg);
      }

      .card-date {
        font-size: 0.75rem;
        font-weight: 600;
        letter-spacing: 0.1em;
        text-transform: uppercase;
        opacity: 0.9;
        margin-bottom: var(--space-sm);
      }

      .card-title {
        font-family: var(--font-serif);
        font-size: 1.25rem;
        font-weight: 600;
        line-height: 1.4;
      }

      .card-body {
        padding: var(--space-lg);
      }

      .card-description {
        font-size: 0.9375rem;
        color: var(--color-gray-600);
        margin-bottom: var(--space-md);
      }

      /* Search Highlight */
      .search-snippet {
        font-size: 0.8125rem;
        line-height: 1.5;
        color: var(--color-gray-600);
        background: var(--color-gray-50);
        padding: var(--space-sm) var(--space-md);
        border-radius: var(--radius-md);
        margin-bottom: var(--space-md);
        border: 1px dashed var(--color-gray-200);
        display: none;
      }

      .highlight {
        background-color: #fff3cd;
        color: #856404;
        font-weight: 700;
        padding: 0 2px;
        border-radius: 2px;
      }

      .snippet-sep {
        height: 1px;
        background-color: var(--color-gray-200);
        margin: var(--space-sm) 0;
        border: none;
        opacity: 0.5;
      }

      .snippet-item {
        cursor: pointer;
        padding: 4px;
        border-radius: 4px;
        transition: background-color 0.2s;
      }

      .snippet-item:hover {
        background-color: var(--color-gray-100);
      }

      .card-tags {
        display: flex;
        flex-wrap: wrap;
        gap: var(--space-sm);
      }

      .tag {
        background: var(--color-gray-100);
        color: var(--color-gray-600);
        padding: 0.25rem 0.75rem;
        border-radius: 20px;
        font-size: 0.75rem;
        font-weight: 500;
      }

      .card-footer {
        padding: var(--space-md) var(--space-lg);
        border-top: 1px solid var(--color-gray-200);
        display: flex;
        align-items: center;
        justify-content: space-between;
      }

      .view-report {
        color: var(--color-accent);
        font-weight: 600;
        font-size: 0.875rem;
        display: flex;
        align-items: center;
        gap: var(--space-sm);
      }

      .view-report::after {
        content: "â†’";
        transition: transform 0.2s ease;
      }

      .report-card:hover .view-report::after {
        transform: translateX(4px);
      }

      .status-badge {
        font-size: 0.6875rem;
        font-weight: 600;
        letter-spacing: 0.05em;
        text-transform: uppercase;
        padding: 0.25rem 0.5rem;
        border-radius: var(--radius-md);
      }

      .status-published {
        background: #d4edda;
        color: #155724;
      }

      .status-upcoming {
        background: #fff3cd;
        color: #856404;
      }

      /* Footer */
      .footer {
        background-color: var(--color-gray-900);
        color: var(--color-white);
        padding: var(--space-xl);
        text-align: center;
        margin-top: auto;
      }

      .footer p {
        font-size: 0.875rem;
        opacity: 0.7;
      }

      /* Responsive */
      @media (max-width: 640px) {
        .header {
          padding: var(--space-2xl) var(--space-lg);
        }

        main {
          padding: var(--space-xl) var(--space-lg);
        }

        .report-grid {
          grid-template-columns: 1fr;
        }
      }
    </style>
  </head>
  <body>
    <header class="header">
      <h1 class="header-title">ì£¼ê°„ íšŒì˜ ìë£Œ ì•„ì¹´ì´ë¸Œ</h1>
      <p class="header-subtitle">
        Pacemaker ë¹„ì˜ë¦¬ í”„ë¡œì íŠ¸ - ë§¤ì£¼ íšŒì˜ ì •ë¦¬ ë° ì „ëµ ìë£Œ ëª¨ìŒ
      </p>

      <div class="search-container">
        <div class="search-wrapper">
          <span class="search-icon">ğŸ”</span>
          <input
            type="text"
            id="searchInput"
            class="search-input"
            placeholder="ë³´ê³ ì„œ ì œëª©, íƒœê·¸, ë˜ëŠ” ë‚´ìš© ê²€ìƒ‰..."
            autocomplete="off"
          />
        </div>
        <div id="searchStats" class="search-stats"></div>
      </div>
    </header>

    <main>
      <h2 class="section-title">ğŸ“‹ ë³´ê³ ì„œ ëª©ë¡</h2>

      <div class="report-grid" id="reportGrid">
        <!-- Reports are manually listed here, but IDs will be used for filtering -->
        <!-- Report 1: 01022026 -->
        <a href="./01022026/" class="report-card" data-id="01022026">
          <div class="card-header">
            <p class="card-date">January 02, 2026</p>
            <h3 class="card-title">ë¹„ì˜ë¦¬ë‹¨ì²´ ì„¤ë¦½ ë° OTF í€ë”© ì‹¤í–‰ ê°€ì´ë“œ</h3>
          </div>
          <div class="card-body">
            <p class="card-description">
              ì •ê´€ ì‘ì„± ê°€ì´ë“œ, OTF Seed Grant ê³µëµë²•, ì„¤ë¦½~ì‹ ì²­ ì•¡ì…˜ í”Œëœ
              (Jan~Jul 2026)
            </p>
            <div class="search-snippet" data-id="01022026-snippet"></div>
            <div class="card-tags">
              <span class="tag">ì •ê´€ ê°€ì´ë“œ</span>
              <span class="tag">OTF Seed Grant</span>
              <span class="tag">ì•¡ì…˜ í”Œëœ</span>
            </div>
          </div>
          <div class="card-footer">
            <span class="view-report">ë³´ê³ ì„œ ë³´ê¸°</span>
            <span class="status-badge status-published">Published</span>
          </div>
        </a>

        <!-- Report 2: 12262025 -->
        <a href="./12262025/" class="report-card" data-id="12262025">
          <div class="card-header">
            <p class="card-date">December 26, 2025</p>
            <h3 class="card-title">ë¹„ì˜ë¦¬ ë²•ì¸ ì„¤ë¦½ ë° ìš´ì˜ ì „ëµ ê°€ì´ë“œ</h3>
          </div>
          <div class="card-body">
            <p class="card-description">
              ì¡°ì§ êµ¬ì„± ë° ì•ˆì „ì¥ì¹˜, í€ë”© ê·œëª¨ë³„ ë¡œë“œë§µ, Ontario NPO ì„¤ë¦½ ì ˆì°¨
              ê°€ì´ë“œ ë° AIM ì¬ë¬´ ë¶„ì„
            </p>
            <div class="search-snippet" data-id="12262025-snippet"></div>
            <div class="card-tags">
              <span class="tag">NPO ì„¤ë¦½</span>
              <span class="tag">ì¡°ì§ êµ¬ì„±</span>
              <span class="tag">í€ë”© ë¡œë“œë§µ</span>
            </div>
          </div>
          <div class="card-footer">
            <span class="view-report">ë³´ê³ ì„œ ë³´ê¸°</span>
            <span class="status-badge status-published">Published</span>
          </div>
        </a>

        <!-- Report 3: 12222025 -->
        <a href="./12222025/" class="report-card" data-id="12222025">
          <div class="card-header">
            <p class="card-date">December 22, 2025</p>
            <h3 class="card-title">CPAC ëª¨ë¸ ì „ëµ ë¶„ì„ ë³´ê³ ì„œ</h3>
          </div>
          <div class="card-body">
            <p class="card-description">
              CPAC ëª¨ë¸ vs Building Up ëª¨ë¸ ë¹„êµ ë¶„ì„, ì˜¨íƒ€ë¦¬ì˜¤ ë¹„ì˜ë¦¬ ë²•ì¸ ì„¤ë¦½
              ì ˆì°¨ ë° 2-íŠ¸ë™ ì „ëµ ìˆ˜ë¦½ ê°€ì´ë“œ
            </p>
            <div class="search-snippet" data-id="12222025-snippet"></div>
            <div class="card-tags">
              <span class="tag">ë¹„ì˜ë¦¬ ë²•ì¸</span>
              <span class="tag">CPAC</span>
              <span class="tag">ì˜¨íƒ€ë¦¬ì˜¤</span>
            </div>
          </div>
          <div class="card-footer">
            <span class="view-report">ë³´ê³ ì„œ ë³´ê¸°</span>
            <span class="status-badge status-published">Published</span>
          </div>
        </a>

        <!-- Report 4: charity_strategy -->
        <a
          href="./charity_strategy/"
          class="report-card"
          data-id="charity_strategy"
        >
          <div
            class="card-header"
            style="
              background: linear-gradient(135deg, #c43d00 0%, #ff4f02 100%);
            "
          >
            <p class="card-date">December 2025</p>
            <h3 class="card-title">ìì„ ë‹¨ì²´ ìˆ˜ìµ ëª¨ë¸ ë° ì¥ë‹¨ì  ë¶„ì„</h3>
          </div>
          <div class="card-body">
            <p class="card-description">
              ìºë‚˜ë‹¤ ë¹„ì˜ë¦¬ 3ê°œ ì¡°ì§(CPAC, AIM, NPower) ìˆ˜ìµ ëª¨ë¸, ë©¤ë²„ì‹­ êµ¬ì¡°
              ë° ê°€ì¹˜ ì œì•ˆ ì‹¬ì¸µ ë¶„ì„
            </p>
            <div
              class="search-snippet"
              data-id="charity_strategy-snippet"
            ></div>
            <div class="card-tags">
              <span class="tag">CPAC</span>
              <span class="tag">Autism in Mind</span>
              <span class="tag">NPower</span>
            </div>
          </div>
          <div class="card-footer">
            <span class="view-report">ë³´ê³ ì„œ ë³´ê¸°</span>
            <span class="status-badge status-published">Published</span>
          </div>
        </a>

        <div id="noResults" class="no-results">
          <h3>ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.</h3>
          <p>ë‹¤ë¥¸ ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•´ ë³´ì„¸ìš”.</p>
        </div>
      </div>
    </main>

    <footer class="footer">
      <p>Â© 2025 Pacemaker. All rights reserved.</p>
    </footer>
    <script>
      let fuse;
      const searchInput = document.getElementById("searchInput");
      const searchStats = document.getElementById("searchStats");
      const noResults = document.getElementById("noResults");
      const reportCards = document.querySelectorAll(".report-card");

      // Load search index
      fetch("./search-index.json")
        .then((response) => response.json())
        .then((data) => {
          const options = {
            keys: [
              { name: "title", weight: 0.5 },
              { name: "tags", weight: 0.2 },
              { name: "content", weight: 0.3 },
            ],
            threshold: 0.3,
            includeMatches: true,
            minMatchCharLength: 2,
            findAllMatches: true,
            ignoreLocation: true,
            useExtendedSearch: true, // Enable extended search for literal matches
          };
          fuse = new Fuse(data, options);
        })
        .catch((err) => console.error("Error loading search index:", err));

      function generateSnippet(text, matches, query) {
        if (!matches || matches.length === 0) return "";

        // Try to find match in content first
        let bestMatch = matches.find((m) => m.key === "content");
        if (!bestMatch) return "";

        const indices = bestMatch.indices;
        const padding = 50;
        const chunks = [];

        // Group indices that are close to each other
        let currentChunk = null;
        indices.forEach((idx) => {
          const start = Math.max(0, idx[0] - padding);
          const end = Math.min(text.length, idx[1] + padding + 30);

          if (!currentChunk || start > currentChunk.end + 40) {
            if (currentChunk) chunks.push(currentChunk);
            currentChunk = { start, end, indices: [idx] };
          } else {
            currentChunk.end = Math.max(currentChunk.end, end);
            currentChunk.indices.push(idx);
          }
        });
        if (currentChunk) chunks.push(currentChunk);

        // Sort chunks by importance (number of matches in chunk) and take top 3
        const resultChunks = chunks
          .sort((a, b) => b.indices.length - a.indices.length)
          .slice(0, 3)
          .sort((a, b) => a.start - b.start);

        const snippetHtmls = resultChunks.map((chunk) => {
          let snippet = text.substring(chunk.start, chunk.end);
          let highlightedChunk = "";
          let currentIndex = 0;

          const clean = (str) => str.replace(/\s+/g, " ").trim();

          // Build a unique text fragment by taking a larger window around the match
          const firstIdx = chunk.indices[0];
          const scrollContext = clean(
            text.substring(
              Math.max(0, firstIdx[0] - 40),
              Math.min(text.length, firstIdx[1] + 41)
            )
          );

          chunk.indices.forEach((idx, i) => {
            const matchStart = idx[0] - chunk.start;
            const matchEnd = idx[1] - chunk.start;

            if (matchStart >= currentIndex) {
              highlightedChunk += snippet.substring(currentIndex, matchStart);
              highlightedChunk += `<span class="highlight">${snippet.substring(
                matchStart,
                matchEnd + 1
              )}</span>`;
              currentIndex = matchEnd + 1;
            }
          });
          highlightedChunk += snippet.substring(currentIndex);

          const content =
            (chunk.start > 0 ? "..." : "") +
            highlightedChunk +
            (chunk.end < text.length ? "..." : "");

          return `<div class="snippet-item" data-scroll="${encodeURIComponent(
            scrollContext
          )}">
            ${content}
          </div>`;
        });

        return snippetHtmls.join('<div class="snippet-sep"></div>');
      }

      // Handle snippet clicks for precision navigation
      document.addEventListener("click", (e) => {
        const snippetItem = e.target.closest(".snippet-item");
        if (snippetItem) {
          e.preventDefault();
          e.stopPropagation();

          const card = snippetItem.closest(".report-card");
          const baseUrl = card.getAttribute("href");
          const scrollText = snippetItem.getAttribute("data-scroll");

          // Direct Text Fragment: #:~:text=VALUE
          window.location.href = `${baseUrl}#:~:text=${scrollText}`;
        }
      });

      searchInput.addEventListener("input", (e) => {
        const query = e.target.value.trim();

        if (!query) {
          // Reset view
          reportCards.forEach((card) => {
            card.style.display = "block";
            const snippetDiv = card.querySelector(".search-snippet");
            if (snippetDiv) {
              snippetDiv.style.display = "none";
              snippetDiv.innerHTML = "";
            }
          });
          searchStats.textContent = "";
          noResults.style.display = "none";
          return;
        }

        if (!fuse) return;

        // Use extended search for literal matching (prefix with ')
        const results = fuse.search("'" + query);
        const resultItems = results.reduce((acc, r) => {
          acc[r.item.id] = r;
          return acc;
        }, {});

        let visibleCount = 0;
        reportCards.forEach((card) => {
          const cardId = card.getAttribute("data-id");
          const result = resultItems[cardId];
          const snippetDiv = card.querySelector(".search-snippet");

          if (result) {
            card.style.display = "block";
            visibleCount++;

            // Handle snippet
            if (snippetDiv) {
              const snippetHtml = generateSnippet(
                result.item.content,
                result.matches,
                query
              );
              if (snippetHtml) {
                snippetDiv.innerHTML = snippetHtml;
                snippetDiv.style.display = "block";
              } else {
                snippetDiv.style.display = "none";
              }
            }
          } else {
            card.style.display = "none";
            if (snippetDiv) snippetDiv.style.display = "none";
          }
        });

        searchStats.textContent = `ì´ ${visibleCount}ê°œì˜ ê²°ê³¼ê°€ ê²€ìƒ‰ë˜ì—ˆìŠµë‹ˆë‹¤.`;
        noResults.style.display = visibleCount === 0 ? "block" : "none";
      });
    </script>
  </body>
</html>
